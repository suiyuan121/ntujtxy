define("wap/showcase/base/fuwuhover",["require","zenjs/util/args"],function(e){var o=e("zenjs/util/args"),a=$('<div class="fuwu-hover-container"><p class="pull-left">感觉不错? 赶紧联系拍档吧!</p><a class="btn btn-green pull-right" href="">去拍档主页</a></div>');return function(){var e=o.get("fpd");e&&""!==e&&(a.find("a").attr("href",_global.url.wap+"/fuwu/provider/"+e+"/detail"),$("body").append(a))}}),define("bower_components/imagePreview/views/wx_preview",[],function(){function e(e){var o=e.attr("data-src")||e.attr("src"),a=o.replace(/!.*?\.jpg/i,"!640x320.jpg").replace(/\?imageView2\/.*/i,"!640x320.jpg");return a}function o(e){var o,a=e.closest("a");return a.length&&(o=a.attr("href"),o&&/[http|https|tel|mailto]:/i.test(o))?!0:!1}function a(){var o=e($(this));i(o,[o])}var t=[],i=function(e,o){window.WeixinJSBridge&&window.WeixinJSBridge.invoke("imagePreview",{current:e,urls:o})},n={init:function(n){n=n?n:".js-view-image-list";var s=$(n);if(!s.data("swp-preview-init")){s.data("swp-preview-init",!0);var r=$(".js-view-image"),l=0;r.each(function(){var a=$(this),n=e(a);o(a)||a.width()>=l&&n&&(t.push(n),a.on("click",function(){i(n,t)}))}),s.each(function(a){var t=$(this);t.on("click","img",function(a){var n=t.find(".js-view-image-item");if(0===n.length&&(n=t.find("img")),!o($(a.target))){n=n.map(function(){var o=$(this);return e(o)}).toArray();var s=e($(this));i(s,n)}})}),$(document.body).off("click",".js-view-single-image",a).on("click",".js-view-single-image",a)}},clear:function(){t=[]}};return window.imagePreview=n,n}),define("bower_components/last_position/main",["require","zenjs/util/args"],function(e){function o(e){function o(){clearTimeout(f);var e=i.scrollTop();t.forEach(function(e,o){var a=$(e);0!==a.length&&a.each(function(o,a){try{sessionStorage.setItem(d+"_"+e+"_"+o,$(a).css("height"))}catch(t){}})});try{sessionStorage.setItem(d,e)}catch(o){}}if(location&&sessionStorage){for(var t=e.needMemoryClass||[],i=$(window),n=["sf","fm","reft","spm"],s=location.href,r=0,l=n.length;l>r;r++)s=a.remove(s,n[r]);var c,d=location.pathname+"?"+(s.split("?")[1]||"");try{c=parseInt(sessionStorage.getItem(d))}catch(u){c=0}t.forEach(function(e,o){var a=$(e);if(0!==a.length){var t;a.each(function(o,a){try{t=sessionStorage.getItem(d+"_"+e+"_"+o)}catch(i){t="auto"}$(a).css({"min-height":t})})}});var h=parseInt(i.height())+c;$("body").css({"min-height":h}),c>0&&(i.scrollTop(c),i.trigger("scroll"));var f;i.scroll(function(){setTimeout(o,1e3)})}}var a=e("zenjs/util/args");return o}),function(){function e(){clearTimeout(i),o.addClass("done")}var o=$(".js-tpl-weixin-list-item"),a=$(".js-tpl-weixin-bg");if(!(a.length<=0)){var t=a[0],i=setTimeout(function(){e()},2e3);t.onload=t.onerror=t.onabort=e,t.complete&&e()}}(),function(){var e=$(".js-tpl-shop"),o="/v2/showcase/homepage/goodscount.json";e.length&&$._ajax({url:o,type:"GET",dataType:"json",data:{kdt_id:window._global.kdt_id}}).done(function(o){if(0===+o.code){var a=e.find(".js-all-goods"),t=e.find(".js-new-goods"),i=e.find(".js-order"),n=o.data,s="";s=(n.all_goods.count+"").length,a.find("a").attr("href",n.all_goods.url),a.find(".count").html(n.all_goods.count).addClass("l-"+s),s=(n.new_goods.count+"").length,t.find("a").attr("href",n.new_goods.url),t.find(".count").html(n.new_goods.count).addClass("l-"+s),i.find("a").attr("href",n.order.url)}})}(),function(){$(".js-select-coupon").on("click",function(){var e=$(this),o=window.motify;$._ajax({url:"/v2/ump/promocard/fetchalias.json",type:"POST",data:{kdt_id:e.data("kdt-id"),id:e.data("id")}}).done(function(e){0===+e.code?window.location.href=e.data.url:o.log(e.msg||"网络错误")}).fail(function(){o.log("网络错误")})})}(),window.init_custom_notice=function(e){var o=$(".js-scroll-notice",$(e||"body"));o.length&&o.each(function(){function e(){n--,0>n+t&&(n=i),o.css({left:n})}var o=$(this),a=o.parents(".custom-notice-inner"),t=o.width(),i=a.width(),n=0;i>=t||(o.css({position:"relative"}),setInterval(e,25))})},window.init_custom_notice(),define("wap/showcase/homepage/homepage",function(){}),function(){var e=$(".js-custom-level"),o=$(".js-custom-point"),a=$(".js-custom-level-title-section");if(!(+_global.fans_id<=0&&+_global.buyer_id<=0)){var t=window._global.url.wap+"/showcase/component/point.jsonp?"+$.param({kdt_id:window._global.kdt_id});(e.length>0||o.length>0)&&$._ajax({dataType:"jsonp",type:"GET",url:t,success:function(t){0===+t.code&&(e.html(t.data.level||"会员"),o.html(t.data.point||"暂无数据"),a.removeClass("hide"))}})}}(),define("wap/uc/title",function(){}),define("wap/components/app_h5/main",["require","exports","module"],function(e,o,a){a.exports={currentUrl:"",currentTime:Date.now(),doCall:function(e,o){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.doCall(e,o)})},compareVersion:function(e,o){for(e=e.split(".").join(""),o=o.split(".").join("");e.length!==o.length;)e.length>o.length?o+="0":e+="0";return e=Number(e),o=Number(o),e>o?"gt":e===o?"eq":"lt"},eq:function(e,o){return"eq"===this.compareVersion(e,o)?!0:!1},gte:function(e,o){var a=this.compareVersion(e,o);return"eq"===a||"gt"===a?!0:!1},lte:function(e,o){var a=this.compareVersion(e,o);return"eq"===a||"lt"===a?!0:!1},configNative:function(e){this.doCall("configNative",e)},getData:function(e,o){o.datatype=e,this.doCall("getData",o)},putData:function(e,o){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))o.datatype=e,this.doCall("putData",o);else switch(e){case"supplierInfo":this.doCall("tellSupplierInfo",{supplier_kdt_id:o.supplier_kdt_id});break;case"goodsInfo":this.doCall("tellGoodsInfo",{goods_id:o.goods_id})}else o.datatype=e,this.doCall("putData",o)},gotoWebview:function(e){if(this.currentUrl===e.url&&Date.now()-this.currentTime<100)this.currentTime=Date.now();else if(this.currentUrl=e.url,this.currentTime=Date.now(),"youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("gotoWebview",e);else switch(e.page){case"supplierHomepage":this.doCall("goHomePage",{homeurl:e.url,name:e.name});break;case"goodsList":this.doCall("viewGoodsList",{url:e.url});break;case"goodsDetail":this.doCall("viewGoodsDetail",{detail_url:e.url,average_profit:e.average_profit,alias:e.alias,seller_goods_alias:e.seller_goods_alias});break;case"newsDetail":this.doCall("viewNewsDetail",{detail_url:e.url})}else this.doCall("gotoWebview",e)},gotoNative:function(e){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("gotoNative",e);else switch(e.page){case"addGoods":this.doCall("addGoodsToShop",{alias:e.alias,seller_goods_alias:e.seller_goods_alias})}else this.doCall("gotoNative",e)},doAction:function(e){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("doAction",e);else switch(e.action){case"back":this.doCall("gotoLogin",{});break;case"appWXPay":this.doCall("appWXPay",{kdt_id:e.kdt_id,order_no:e.order_no});break;case"deliverGoods":this.doCall("deliverGoods",{order_number:e.order_number})}else if("youzanwsc"===_global.platform)if(this.gte(_global.platform_version,"2.8.5"))this.doCall("doAction",e);else switch(e.action){case"back":this.doCall("previousStep",{})}},onAddGoodsSuccess:function(e){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.on("addGoodsSuccess",function(o){e(o)})})},on:function(e,o){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.on("dataReady",function(a){var t=a.datatype,i=a.data,n={};if("object"==typeof i)n=i;else try{n=JSON.parse(i)}catch(s){}t===e&&o(n)})})}}}),define("wap/showcase/shop_nav/main",["vendor/zepto/outer","wap/components/app_h5/main","zenjs/util/ua"],function(e,o,a){var t=$("#shop-nav");if(t.length&&window._global.showcase_type){t.hide();var i=$(),n=i.find(".js-nav-pop"),s=function(e){var o=$(e.target),a=o.parents(".nav-item"),t=o.hasClass(".js-mainmenu")?o:a.find(".js-mainmenu"),i=a.find(".js-submenu"),n=i.find(".arrow"),s=o.parents(".js-navmenu"),r=s.find(".nav-item");i.css("opacity","0").toggle();var l=r.length,c=r.index(a),d=t.outerWidth(),u=(i.outerWidth()-t.outerWidth())/2,h=i.outerWidth()/2;if(0===i.size())$(".js-submenu:visible").hide();else{var f=i.outerWidth(),p=a.outerWidth(),g="auto",m="auto",w="auto",v="auto";0===c?(g=t.position().left-u,m=h-n.outerWidth()/2):c===l-1&&f>p?(w=8,v=d/2-w):(g=t.position().left-u,m=h-n.outerWidth()/2);var _=5;0>g&&(m=m+g+_,g=_),0>w&&(v=v+w+_,w=_),i.css({left:g,right:w}),n.css({left:m,right:v}),$(".js-submenu:visible").not(i).hide(),i.css("opacity","1")}};$(document).on("click",function(e){i[0]&&(e.target==i[0]||$.contains(i[0],e.target)||($(".js-submenu:visible").hide(0),i.hasClass("nav-show")&&(i.removeClass("nav-show").addClass("nav-hide"),setTimeout(function(){n.hide(0)},500))))}),$("body").on("click",".js-navmenu",function(e){var o=$(e.target);e.fromMenu=!0,window.Logger&&Logger.log({fm:"click",title:o.prop("title")||o.text()})}),$("body").on("click",".js-submenu",function(e){var o=$(e.target);e.fromMenu=!0,window.Logger&&Logger.log({fm:"click",title:o.prop("title")||o.text()}),e.stopPropagation()}),$("body").on("click",".js-mainmenu",function(e){s(e)});var r;$(window).on("scroll",function(e){e.preventDefault(),i[0]&&i.hasClass("nav-show")&&(i.removeClass("nav-show").addClass("nav-hide"),setTimeout(function(){n.hide(0)},500))}),$("body").on("click",".js-nav-special",function(e){$(e.target);i[0]&&"animation"!=i.data("animation")&&(i.data("animation","animation"),i.hasClass("nav-show")?(i.removeClass("nav-show").addClass("nav-hide"),r=setTimeout(function(){n.css("display","none"),i.data("animation","")},600)):(n.css("display","block"),i.addClass("nav-show").removeClass("nav-hide"),setTimeout(function(){i.data("animation","")},600)))}),("youzanmars"!=_global.platform||"feature"!=_global.showcase_type)&&$._ajax({url:"/v2/showcase/shopnav/nav.json?kdt_id="+window._global.kdt_id,type:"GET",dataType:"json",data:{showcase_type:window._global.showcase_type,url:window.location.href,css:"version_wap_css.stylesheets/wap/pages/showcase/shopnav_custom/shopnav_custom"},success:function(e){if(0==e.code){var o=e.data||{},a=o.html||"",s=o.css||"";window.Loader.async([s],function(){t.show()}),t.html(a),i=t.find(".js-navmenu"),n=i.find(".js-nav-pop");var r=i.data("type");4!=r&&$("body").addClass("body-fixed-bottom")}}});var l=a.isIOS();$(".js-share-gift").on("click",function(){var e="http://img.yzcdn.cn/public_files/2015/11/08/5fc8b4ef2d3b54901da505fb8078c4f1.gif",a={action:"share",title:"朋友圈狂欢节，狂撒亿元现金券，抢到就是赚到！~",desc:"今年11.11，你的购物清单我承包了！",link:window.getShareLink(_global.lucky_money_url),imgs_url:[e]};l&&(a.imgs_url=e),o.doAction(a)})}}),window.Zepto&&function(e){e.fn.serializeArray=function(){var o,a,t=[],i=function(e){return e.forEach?e.forEach(i):void t.push({name:o,value:e})};return this[0]&&e.each(this[0].elements,function(t,n){a=n.type,o=n.name,o&&"fieldset"!=n.nodeName.toLowerCase()&&!n.disabled&&"submit"!=a&&"reset"!=a&&"button"!=a&&"file"!=a&&("radio"!=a&&"checkbox"!=a||n.checked)&&i(e(n).val())}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(o){e.push(encodeURIComponent(o.name)+"="+encodeURIComponent(o.value))}),e.join("&")},e.fn.submit=function(o){if(0 in arguments)this.bind("submit",o);else if(this.length){var a=e.Event("submit");this.eq(0).trigger(a),a.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),define("vendor/zepto/form",function(){}),define("wap/showcase/search_bar/main",["vendor/zepto/form"],function(){$.fn.searchBar=function(){var e=$.fn.searchBar.container;return e||(e=$.fn.searchBar.init()),this.each(function(){$(this).on("click",function(){e.css("display","block"),e.find(".search-input").focus()})})},$.fn.searchBar.keywords=function(e,o){$._ajax({url:"/v2/showcase/goods/searchSuggest.json",type:"GET",dataType:"json",timeout:5e3,data:{q:e,kdt_id:window._global.kdt_id},success:function(e){var a=e.code,t=e.data;if(0===a){var i="",n=t.tips,s=n.length;$(".js-tag-clear").addClass("hide"),s>0&&($.each(n,function(e,o){i+="<li><p>"+o+"</p></li>"}),s%2&&(i+="<li><p>&nbsp;</p></li>"),o.html(i).addClass("search-recom-list"))}},error:function(e,o,a){}})},$.fn.searchBar.init=function(){var e,o=window.localStorage,a=$('<div class="search-bar" style="display:none;"></div>'),t=$(['<form class="search-form" action="/v2/search" method="GET">','<input type="search" class="search-input" placeholder="搜索本店所有商品" name="q" value="">','<input type="hidden" name="kdt_id" value="'+window._global.kdt_id+'">','<a class="js-search-cancel search-cancel" href="javascript:;">取消</a>','<span class="search-icon"></span>','<span class="close-icon hide"></span>',"</form>"].join("")),i=$('<div class="history-wrap center"></div>'),n=t.find(".js-search-cancel"),s=$('<ul class="history-list search-recom-list js-history-list clearfix"></ul>'),r=$('<a class="tag tag-clear js-tag-clear c-gray-darker hide" href="javascript:;">清除历史搜索</a>'),l=t.find(".search-input"),c=t.find(".close-icon"),d="";return o&&(e=(JSON.parse(o.getItem("searchhistory"))||{}).result,e&&($.each(e,function(e,o){d+="<li>"+o+"</li>"}),s.append(d).removeClass("search-recom-list"),r.removeClass("hide"))),i.append(s).append(r),a.append(t).append(i),$("body").append(a),$.fn.searchBar.container=a,t.on("submit",function(){var a=$.trim(l.val());return a.length>100?void motify.log("搜索关键字不能超过100字"):void(o&&a&&(e=e||[],e=$.grep(e,function(e){return e!=a}),e.unshift(a),o.setItem("searchhistory",JSON.stringify({result:e}))))}).on("input",function(){var e=$.trim(l.val());""!==e?(c.removeClass("hide"),$.fn.searchBar.keywords(e,s)):(s.html(d).removeClass("search-recom-list"),i.removeClass("hide"),c.addClass("hide"),r.removeClass("hide"))}),c.on("click",function(){l.val(""),c.addClass("hide")}),n.on("click",function(){a.css("display","none")}),s.on("click","li",function(e){l.val($(e.currentTarget).text()),t.submit()}),r.on("click",function(){o&&(o.removeItem("searchhistory"),e=null),i.html("")}),a}}),require(["wap/showcase/base/fuwuhover","bower_components/imagePreview/views/wx_preview","bower_components/last_position/main","vendor/zepto/outer","wap/showcase/homepage/homepage","wap/uc/title","wap/showcase/shop_nav/main","wap/showcase/search_bar/main"],function(e,o,a){e(),window._global.spm&&"h"===window._global.spm.logType&&window._global.spm.logType2&&window.onReady&&window.onReady("Logger",function(){window.Logger&&window.Logger.log({spm:window._global.spm.logType2+window._global.spm.logId2,fm:"display"})}),$(".js-search").searchBar(),("feature"===_global.showcase_type||"homepage"===_global.showcase_type)&&a({needMemoryClass:[".custom-richtext",".js-goods-list.waterfall",".custom-cube2-table-wrapper",".custom-nav-4"]}),window._global.goods_id||o.init(),function(){var e=$.map(window.showcase_js_map||[],function(e){return e.url});window.Loader.sync(e)}()}),define("main",function(){});